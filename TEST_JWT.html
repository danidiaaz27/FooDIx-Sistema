<!DOCTYPE html>
<html>
<head>
    <title>Test JWT Token</title>
</head>
<body>
    <h1>Test JWT Token Status</h1>
    <button onclick="checkToken()">Verificar Token JWT</button>
    <pre id="result"></pre>

    <script>
        function checkToken() {
            const token = localStorage.getItem('jwt_token');
            const resultDiv = document.getElementById('result');
            
            if (!token) {
                resultDiv.textContent = '‚ùå No hay token JWT en localStorage\n\nNecesitas iniciar sesi√≥n en: http://localhost:8080/login';
                return;
            }
            
            resultDiv.textContent = '‚úÖ Token encontrado:\n\n' + token.substring(0, 50) + '...\n\nAhora prueba acceder a: http://localhost:8080/menuRestaurante';
            
            // Test del token con un request
            fetch('http://localhost:8080/menuRestaurante', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(response => {
                resultDiv.textContent += '\n\nüì° Status Code: ' + response.status;
                if (response.status === 200) {
                    resultDiv.textContent += '\n‚úÖ Token v√°lido - Acceso autorizado';
                } else if (response.status === 401 || response.status === 403) {
                    resultDiv.textContent += '\n‚ùå Token inv√°lido o expirado - Inicia sesi√≥n nuevamente';
                }
            })
            .catch(error => {
                resultDiv.textContent += '\n\n‚ùå Error: ' + error.message;
            });
        }
    </script>
</body>
</html>
